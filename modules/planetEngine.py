import common # floor, sin, cos, atan2
# print(pi)
# pi = 3.141592653589793
# pi180 = pi / 180
# —Å—Ö–æ–¥—è—Ç—Å—è —á–∏—Å–ª–∞ pi

def time_to_d(year, month, day, hour, minute, UT=0, dst=0): 
  pr = 1/24 if dst else 0
  JDN = (367 * year - floor(7 * (year + floor((month + 9) / 12)) / 4)) + floor(275 * month / 9) + (day + 1721013.5 - UT / 24)
  JD = JDN + hour/24 + minute/1440 - pr
  j2000 = 2451543.5
  d = JD - j2000
  return d

def Planet_Sun(N, i, w, a, e, M):
  """
  N (Œ©) - –¥–æ–ª–≥–æ—Ç–∞ –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ —É–∑–ª–∞. –≠—Ç–æ —É–≥–æ–ª –º–µ–∂–¥—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞ —Ç–æ—á–∫—É –≤–µ—Å–µ–Ω–Ω–µ–≥–æ —Ä–∞–≤–Ω–æ–¥–µ–Ω—Å—Ç–≤–∏—è –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞ –≤–æ—Å—Ö–æ–¥—è—â–∏–π —É–∑–µ–ª –æ—Ä–±–∏—Ç—ã –ø–ª–∞–Ω–µ—Ç—ã. –í–æ—Å—Ö–æ–¥—è—â–∏–π —É–∑–µ–ª ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞, –≥–¥–µ –æ—Ä–±–∏—Ç–∞ –ø–ª–∞–Ω–µ—Ç—ã –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç –ø–ª–æ—Å–∫–æ—Å—Ç—å —ç–∫–ª–∏–ø—Ç–∏–∫–∏ (–ø–ª–æ—Å–∫–æ—Å—Ç—å –∑–µ–º–Ω–æ–π –æ—Ä–±–∏—Ç—ã) –¥–≤–∏–≥–∞—è—Å—å "–≤–≤–µ—Ä—Ö". –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –æ—Ä–±–∏—Ç—ã –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.
  i - –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ä–±–∏—Ç—ã. –≠—Ç–æ —É–≥–æ–ª –º–µ–∂–¥—É –ø–ª–æ—Å–∫–æ—Å—Ç—å—é –æ—Ä–±–∏—Ç—ã –ø–ª–∞–Ω–µ—Ç—ã –∏ –ø–ª–æ—Å–∫–æ—Å—Ç—å—é —ç–∫–ª–∏–ø—Ç–∏–∫–∏.
  w (œâ) - –∞—Ä–≥—É–º–µ–Ω—Ç –ø–µ—Ä–∏—Ü–µ–Ω—Ç—Ä–∞. –≠—Ç–æ —É–≥–æ–ª –º–µ–∂–¥—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞ –≤–æ—Å—Ö–æ–¥—è—â–∏–π —É–∑–µ–ª –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞ –ø–µ—Ä–∏—Ü–µ–Ω—Ç—Ä (—Ç–æ—á–∫–∞ –æ—Ä–±–∏—Ç—ã, –±–ª–∏–∂–∞–π—à–∞—è –∫ –°–æ–ª–Ω—Ü—É). –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é —ç–ª–ª–∏–ø—Å–∞ –Ω–∞ –æ—Ä–±–∏—Ç–∞–ª—å–Ω–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏.
  a - –±–æ–ª—å—à–∞—è –ø–æ–ª—É–æ—Å—å. –≠—Ç–æ –ø–æ–ª–æ–≤–∏–Ω–∞ –¥–ª–∏–Ω—ã —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –æ—Å–∏ —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–π –æ—Ä–±–∏—Ç—ã –ø–ª–∞–Ω–µ—Ç—ã. –û–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã –æ—Ç –°–æ–ª–Ω—Ü–∞.
  e - —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç. –≠—Ç–æ –º–µ—Ä–∞ —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –≤—ã—Ç—è–Ω—É—Ç–∞ –æ—Ä–±–∏—Ç–∞ –ø–ª–∞–Ω–µ—Ç—ã. e = 0 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä—É–≥–æ–≤–æ–π –æ—Ä–±–∏—Ç–µ, –∞ e ‚Üí 1 ‚Äî —Å–∏–ª—å–Ω–æ –≤—ã—Ç—è–Ω—É—Ç–æ–π —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–π –æ—Ä–±–∏—Ç–µ.
  M - —Å—Ä–µ–¥–Ω—è—è –∞–Ω–æ–º–∞–ª–∏—è. –≠—Ç–æ —É–≥–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–µ—Ç–∞ "–ø—Ä–æ—à–ª–∞ –±—ã" –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –µ—Å–ª–∏ –±—ã –¥–≤–∏–≥–∞–ª–∞—Å—å –ø–æ –∫—Ä—É–≥–æ–≤–æ–π –æ—Ä–±–∏—Ç–µ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —É–≥–ª–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –û–Ω –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏.
  """
  M %= 360
  M2 = M * pi180
  E0 = M + (180 / pi) * e * sin(M2) * (1 + e * cos(M2))
  E0 %= 360
  E02 = E0 * pi180
  E1 = E0 - (E0 - (180 / pi) * e * sin(E02) - M) / (1 - e * cos(E02))
  E1 %= 360
  E = E1 * pi180
  x = a * (cos(E) - e)
  y = a * ((1 - e*e) ** 0.5) * sin(E)

  r = (x*x + y*y) ** 0.5
  v = atan2(y, x)
  v = v / pi180 % 360

  vw = (v + w) * pi180
  xeclip = r * (cos(N * pi180) * cos(vw) - sin(N * pi180) * sin(vw) * cos(i * pi180))
  yeclip = r * (sin(N * pi180) * cos(vw) + cos(N * pi180) * sin(vw) * cos(i * pi180))
  zeclip = r * sin(vw) * sin(i * pi180) 
  long2 = atan2(yeclip, xeclip)
  long2 = long2 / pi180 % 360
  lat2 = atan2(zeclip, (xeclip*xeclip + yeclip*yeclip) ** 0.5)
  lat2 /= pi180
  return xeclip, yeclip, zeclip, long2, lat2, r

def spherical2rectangular(RA, Decl, r):
  # RA - –ª–æ–Ω–≥–Ω–∏—Ç—É–¥–∞ (long)
  # Decl - –ª–∞–Ω—Ç–∏—Ç—É–¥–∞ (lat)
  RA *= pi180
  Decl *= pi180
  x = r * cos(RA) * cos(Decl)
  y = r * sin(RA) * cos(Decl)
  z = r * sin(Decl)
  return x, y, z

def rectangular2spherical(x, y, z):
  r    = (x*x + y*y + z*z) ** 0.5
  RA   = atan2(y, x)
  Decl = atan2(z, (x*x + y*y) ** 0.5)
    
  RA = RA / pi180 % 360
  Decl = Decl / pi180
  return RA, Decl, r

def Earth(w, a, e, M):
  # L = (w+M) % 360
  E = M + (180 / pi) * e * sin(M * pi180) * (1 + e * cos(M * pi180))
  E = E * pi180
  x = cos(E) - e
  y = sin(E) * (1 - e*e) ** 0.5

  r = (x*x + y*y) ** 0.5
  v = atan2(y, x) / pi180
  lon = (v+w) % 360 * pi180
  x2 = -r * cos(lon)
  y2 = -r * sin(lon)
  z2 = 0
  long, lat, dist = rectangular2spherical(x2, y2, z2)
  # dist == r
  return x2, y2, z2, long, lat, dist

def Ploutonas(d):
  S = ( 50.03 + 0.033459652 * d) * pi180
  P = (238.95 + 0.003968789 * d) * pi180

  long = (238.9508 + 0.00400703 * d
    -19.799 * sin(    P) +19.848 * cos(    P)
    + 0.897 * sin(2 * P) - 4.956 * cos(2 * P)
    + 0.610 * sin(3 * P) + 1.211 * cos(3 * P)
    - 0.341 * sin(4 * P) - 0.190 * cos(4 * P)
    + 0.128 * sin(5 * P) - 0.034 * cos(5 * P)
    - 0.038 * sin(6 * P) + 0.031 * cos(6 * P)
    + 0.020 * sin(S - P) - 0.010 * cos(S - P))
  lat = (-3.9082
    - 5.453 * sin(    P) -14.975 * cos(    P)
    + 3.527 * sin(2 * P) + 1.673 * cos(2 * P)
    - 1.051 * sin(3 * P) + 0.328 * cos(3 * P)
    + 0.179 * sin(4 * P) - 0.292 * cos(4 * P)
    + 0.019 * sin(5 * P) + 0.100 * cos(5 * P)
    - 0.031 * sin(6 * P) - 0.026 * cos(6 * P)
                         + 0.011 * cos(S - P))
  r = (40.72
    + 6.68 * sin(    P) + 6.90 * cos(P)
    - 1.18 * sin(2 * P) - 0.03 * cos(2 * P)
    + 0.15 * sin(3 * P) - 0.14 * cos(3 * P))

  x, y, z = spherical2rectangular(long, lat, r)
  return x, y, z, long, lat, r

def Moon_Planet(N, i, w, a, e, M, planet_N, planet_w, planet_M):
  x, y, z, long, lat, r = Planet_Sun(N, i, w, a, e, M)

  L = N + w + M # moon' s mean longtitude
  planet_L = planet_N + planet_w + planet_M

  #moon' s mean anomally
  Ds = (L - planet_L) % 360 # moon' s mean elogation
  Fs = (L - N) % 360 # moon' s argument of latitude

  #Peturbations in Longitude
  D1 = -1.274 * sin((M - 2 * Ds) * pi180) #evection
  D2 = 0.658 * sin((2 * Ds) * pi180) #variation
  D3 = -0.186 * sin((planet_M) * pi180)
  D4 = -0.059 * sin((2 * M - 2 * Ds) * pi180)
  D5 = -0.057 * sin((M - 2 * Ds + planet_M) * pi180)
  D6 = 0.053 * sin((M + 2 * Ds) * pi180)
  D7 = 0.046 * sin((2 * Ds - planet_M) * pi180)
  D8 = 0.041 * sin((M - planet_M) * pi180)
  D9 = -0.035 * sin(Ds * pi180) #parallactic equation
  D10 = -0.031 * sin((M + planet_M) * pi180)
  D11 = -0.015 * sin((2 * Fs - 2 * Ds) * pi180)
  D12 = 0.011 * sin((M - 4 * Ds) * pi180)
  #Peturbations in Latitude
  D13 = -0.173 * sin((Fs - 2 * Ds) * pi180)
  D14 = -0.055 * sin((M - Fs - 2 * Ds) * pi180)
  D15 = -0.046 * sin((M + Fs - 2 * Ds) * pi180)
  D16 = 0.033 * sin((Fs + 2 * Ds) * pi180)
  D17 = 0.017 * sin((2 * M + Fs) * pi180)
  #Peturbations in Distance
  D18 = -0.58 * cos((M - 2 * Ds) * pi180)
  D19 = -0.46 * cos((2 * Ds) * pi180)

  longdists = D1+D2+D3+D4+D5+D6+D7+D8+D9+D10+D11+D12
  latdists = D13+D14+D15+D16+D17
  moondist = D18+D19

  long += longdists
  lat += latdists
  r += moondist
  x, y, z = spherical2rectangular(long, lat, r)
  return x, y, z, long, lat, r

def planetPositions(d):
  # print(time_to_d(2000, 1, 1, 0, 0)) # 1.0
  # d = time_to_d(2020, 1, 1, 12, 0)

  # Ermis (–ú–µ—Ä–∫—É—Ä–∏–π)
  N = 48.3313 + 3.24587E-5 * d
  i = 7.0047 + 5.00E-8 * d
  w = 29.1241 + 1.01444E-5 * d
  a = 0.387098
  e = 0.205635 + 5.59E-10 * d
  M = 168.6562 + 4.0923344368 * d
  ermis = Planet_Sun(N, i, w, a, e, M)

  # xereclip,yereclip,zereclip, long2_er, lat2_er, r_er = Planet_Sun(
  #   M_er, e_er, a_er, N_er, w_er, i_er)
  # print("Mercury (horizontal):", long2_er, lat2_er, r_er)
  # print("Mercury (rectangular):", xereclip, yereclip, zereclip) # xzy –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

  # Afroditi (–í–µ–Ω–µ—Ä–∞)
  N = 76.6799 + 2.46590E-5 * d
  i = 3.3946 + 2.75E-8 * d
  w = 54.8910 + 1.38374E-5 * d
  a = 0.723330
  e = 0.006773 - 1.30E-9 * d
  M = 48.0052 + 1.6021302244 * d
  afroditi = Planet_Sun(N, i, w, a, e, M)

  # Earth (–∑–Æ–º–ª—è)
  w = 282.9404 + 4.70935E-5 * d
  a = 1 # —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –°–æ–ª–Ω—Ü–∞ –¥–æ –ó–µ–º–ª–∏ –∫–∞–∫ —Ä–∞–∑ –∏ –∑–∞–¥–∞—ë—Ç 1 –∞.–µ.
  e = 0.016709 - 1.151E-9 * d
  M = 356.047 + 0.9856002585 * d
  earth = Earth(w, a, e, M)

  # –õ—É–Ω–∞
  N = 125.1228 - 0.0529538083 * d
  i = 5.1454
  ws = 318.0634 + 0.1643573223 * d
  a = 60.2666 # earth's equatorial radius
  e = 0.054900
  Ms = 115.3654 + 13.0649929509 * d
  moon = Moon_Planet(N, i, ws, a, e, Ms, 0, w, M)

  # Aris (–ú–∞—Ä—Å)
  N = 49.5574 + 2.11081E-5 * d
  i = 1.8497 - 1.78E-8 * d
  w = 286.5016 + 2.92961E-5 * d
  a = 1.523688
  e = 0.093405 + 2.51E-9 * d
  M = 18.6021 + 0.5240207766 * d
  aris = Planet_Sun(N, i, w, a, e, M)

  # Dias (–Æ–ø–∏—Ç–µ—Ä)
  N = 100.4542 + 2.76854E-5 * d
  i = 1.3030 - 1.557E-7 * d
  w = 273.8777 + 1.6450E-5 * d
  a = 5.20256
  e = 0.048498 + 4.469E-9 * d
  M = 19.8950 + 0.0830853001 * d
  dias = Planet_Sun(N, i, w, a, e, M)
  M_di = M % 360

  # Kronos (–°–∞—Ç—É—Ä–Ω)
  N = 113.6634 + 2.38980E-5 * d
  i = 2.4886 - 1.081E-7 * d
  w = 339.3939 + 2.97661E-5 * d
  a = 9.55475
  e = 0.055546 - 9.499E-9 * d
  M = 316.9670 + 0.0334442282 * d
  kronos = Planet_Sun(N, i, w, a, e, M)
  M_kr = M % 360

  # Ouranos (–£—Ä–∞–Ω)
  N = 74.0005 + 1.3978E-5 * d
  i = 0.7733 + 1.9E-8 * d
  w = 96.6612 + 3.0565E-5 * d
  a = 19.18171 - 1.55E-8 * d
  e = 0.047318 + 7.45E-9 * d
  M = 142.5905 + 0.011725806 * d
  ouranus = Planet_Sun(N, i, w, a, e, M)
  M_ou = M % 360

  # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –Æ–ø–∏—Ç–µ—Ä–∞, –°–∞—Ç—É—Ä–Ω–∞ –∏ –£—Ä–∞–Ω–∞ –º–µ–∂–¥—É —Å–æ–±–æ–π

  diat1 = -0.332 * sin((2 * M_di - 5 * M_kr - 67.6) * pi180)
  diat2 = -0.056 * sin((2 * M_di - 2 * M_kr + 21  ) * pi180)
  diat3 =  0.042 * sin((3 * M_di - 5 * M_kr + 21  ) * pi180)
  diat4 = -0.036 * sin((    M_di - 2 * M_kr       ) * pi180)
  diat5 =  0.022 * cos((    M_di -     M_kr       ) * pi180)
  diat6 =  0.023 * sin((2 * M_di - 3 * M_kr + 52  ) * pi180)
  diat7 = -0.016 * sin((    M_di - 5 * M_kr - 69  ) * pi180)
  diataraxes_long_di = diat1 + diat2 + diat3 + diat4 + diat5 + diat6 + diat7

  diat1 =  0.812 * sin((2 * M_di - 5 * M_kr - 67.6) * pi180)
  diat2 = -0.229 * cos((2 * M_di - 4 * M_kr -  2  ) * pi180)
  diat3 =  0.119 * sin((    M_di - 2 * M_kr -  3  ) * pi180)
  diat4 =  0.046 * sin((2 * M_di - 6 * M_kr - 69  ) * pi180)
  diat5 =  0.014 * sin((    M_di - 3 * M_kr + 32  ) * pi180)
  diataraxes_long_kr = diat1 + diat2 + diat3 + diat4 + diat5
  diat6 = -0.02  * cos((2 * M_di - 4 * M_kr -  2  ) * pi180)
  diat7 =  0.018 * sin((2 * M_di - 6 * M_kr - 49  ) * pi180)
  diataraxes_lat_kr = diat6 + diat7

  diat1 =  0.04  * sin((M_kr - 2 * M_ou +  6) * pi180)
  diat2 =  0.035 * sin((M_kr - 3 * M_ou + 33) * pi180)
  diat3 = -0.015 * sin((M_di -     M_ou + 20) * pi180)
  diataraxes_long_ou = diat1 + diat2 + diat3

  long, lat, r = dias[3:]
  x, y, z = spherical2rectangular(long + diataraxes_long_di, lat, r)
  dias = x, y, z, long, lat, r

  long, lat, r = kronos[3:]
  x, y, z = spherical2rectangular(long + diataraxes_long_kr, lat + diataraxes_lat_kr, r)
  kronos = x, y, z, long, lat, r

  long, lat, r = ouranus[3:]
  x, y, z = spherical2rectangular(long + diataraxes_long_ou, lat, r)
  ouranus = x, y, z, long, lat, r

  # Poseidonas (–ù–µ–ø—Ç—É–Ω)
  N = 131.7806 + 3.0173E-5 * d
  i = 1.7700 - 2.55E-7 * d
  w = 272.8461 - 6.027E-6 * d
  a = 30.05826 + 3.313E-8 * d
  e = 0.008606 + 2.15E-9 * d
  M = 260.2471 + 0.005995147 * d
  poseidonas = Planet_Sun(N, i, w, a, e, M)

  # Ploutonas (–ü–ª—É—Ç–æ–Ω)
  ploutonas = Ploutonas(d)

  # D CERES epoch 2455400.5 2010-jul-23.0   j2000= 2451543.5
  ddd = d + 2451543.5 - 2455400.5
  N = 80.39319901972638 + 1.1593E-5 * ddd
  i = 10.58682160714853 - 2.2048E-6 * ddd
  w = 72.58981198193074 + 1.84E-5 * ddd
  a = 2.765348506018043
  e = 0.07913825487621974 + 1.8987E-8 * ddd
  M = 113.4104433863731 + 0.21408169952325 * ddd
  ceres = Planet_Sun(N, i, w, a, e, M)

  # A CHIRON epoch  2456400.5 2013-apr-18.0   j2000= 2451543.5
  dddd = d + 2451543.5 - 2456400.5
  N = 209.3557401732507
  i = 6.929449422368333
  w = 339.3298742575888
  a = 13.6532230321495
  e = 0.3803659797957286
  M = 122.8444574834622 + 0.01953670401251872 * dddd
  chiron = Planet_Sun(N, i, w, a, e, M)

  # A ERIS epoch  2456400.5 2013-apr-18.0   j2000= 2451543.5
  ddddd = d + 2451543.5 - 2456400.5
  N = 36.0308972598494
  i = 43.88534676566927
  w = 150.8002573158863
  a = 67.95784302407351
  e = 0.4370835020505101
  M = 203.2157808586589 + 0.001759319413340421 * ddddd
  eris = Planet_Sun(N, i, w, a, e, M)

  return {
    'Mercury': ermis,
    'Venus'  : afroditi,
    'Earth'  : earth,
    'Mars'   : aris,
    'Jupiter': dias,
    'Saturn' : kronos,
    'Uranus' : ouranus,
    'Neptune': poseidonas,
    'Pluto'  : ploutonas,
    'Ceres'  : ceres,
    'Chiron' : chiron,
    'Eris'   : eris,
    "Moon (Luna)": moon,
  }



AUm = 149597870700
# –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ (AU) —Ä–∞–≤–Ω–∞ 149 597 870 700 –º–µ—Ç—Ä–∞–º
# –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –°–æ–ª–Ω—Ü–∞ –¥–æ –ó–µ–º–ª–∏ = 1 AU
# –õ–µ—Ç–æ–º 0.9832898912 AU
# –ó–∏–º–æ–π 1.0167103335 AU

sunRadius = 695700000 # –º–µ—Ç—Ä–æ–≤
sunRadius /= AUm
# print(sunRadius) # –≤ AU = 0.004650467260962157

"""
GT       = {
     'Mercury': (263.83033031837124, -4.057599521202387, 0.4659797616165433),
     'Venus': (5.228267566604346, -3.2222136733454763, 0.7262291936644325),
     'Earth': (100.52892458583565, 0.0, 0.9833180862528659),
     'Mars': (214.38221616457562, 0.4891253753974966, 1.5891803735433014),
   # 'Jupiter': (276.10498313633025, 0.10374961050190847, 5.228112674603031),
     'Jupiter': (276.0863342124177,  0.10374961050190847, 5.228112674603031),
   # 'Saturn': (292.512767008796,   0.05134540100060894,  10.05212207219113),
     'Saturn': (292.60686589472857, 0.053486386724257005, 10.05212207219113),
   # 'Uranus': (35.35030250536327,    359.5159538071305, 19.809355998647174),
     'Uranus': (35.36072346107011, -0.48404619286953715, 19.80935599864717),
     'Neptune': (348.0172656026235, -1.039905299592724, 29.914939199387618),
     'Pluto': (292.7499413549187, -0.6709774750727665, 33.87680754878506),
     'Ceres': (290.86531789432115, -5.404211011344594, 2.9204640444111933),
     'Chiron': (4.327136751763591, 2.943432379699923, 18.810534112295773),
     'Eris': (23.548094614031402, -11.744274334977886, 95.99830322945104)
     }

GT2       = {
 'Mercury': (-0.04995474668786382, -0.46211955436524343, -0.03297239743832171),
 'Venus': (0.7220644052172724, 0.06607221451735312, -0.04082032480874338),
 'Earth': (-0.1796835606652678, 0.9667617476807042, 0),
 'Mars': (-1.3114849994179518, -0.8973947336694352, 0.013566426916695826),
 'Jupiter': (0.5560117501416899, -5.198453948006299, 0.009466916443751654),
 'Saturn': (3.8488483131935203, -9.286088717491223, 0.009008170828773239),
 'Uranus': (16.156527438922524, 11.460767849633232, -0.1673514066131819),
 'Neptune': (29.25827921158193, -6.209824739715596, -0.5429194988087228),
 'Pluto': (13.09960254295737, -31.239096028464672, -0.3967143031550649),
 'Ceres': (1.0355652247801526, -2.716810703397821, -0.2750536344563635),
 'Chiron': (18.732169225956646, 1.4174013926682936, 0.9659207897275007),
 'Eris': (86.16175536857236, 37.550227779065736, -19.539870226800424)
 }

for k, v in planetPositions().items():
  verdict  = "‚úÖ" if v[:3] == GT2[k] else "üî•"
  verdict2 = "‚úÖ" if v[3:] == GT [k] else "üî•"
  print(k, verdict, verdict2, " ")
  print([abs(v[i] - GT2[k][i]) for i in range(3)])
  # print([abs(v[i+3] - GT[k][i]) for i in range(3)])
print("‚Ä¢", -120 % 360, -120 % 360.0, divmod(-120, 360), divmod(-120, 360.0))
print("‚Ä¢", -120.5 % 360, -120.5 % 360.0, divmod(-120.5, 360), divmod(-120.5, 360.0))
"""

def textCompactor(text):
  result = []
  current = 0
  for word in text.split():
    L = len(word)
    next = current + 1 + L
    if current and next > 24:
      result.append("\n")
      current = len(word)
    else:
      result.append(" ")
      current = next
    result.append(word)
  return "".join(result)

planetDescriptions = {
  "Sun": "–°–æ–ª–Ω—Ü–µ. –ó–≤–µ–∑–¥–∞, —Ü–µ–Ω—Ç—Ä –Ω–∞—à–µ–π –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –æ–≥—Ä–æ–º–Ω—ã–π —à–∞—Ä –∏–∑ —Ä–∞—Å–∫–∞–ª–µ–Ω–Ω–æ–≥–æ –≥–∞–∑–∞, –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏ –∏ —Å–≤–µ—Ç–∞.",
  "Mercury": "–ú–µ—Ä–∫—É—Ä–∏–π. –ë–ª–∏–∂–∞–π—à–∞—è –∫ –°–æ–ª–Ω—Ü—É –ø–ª–∞–Ω–µ—Ç–∞, –º–∞–ª–µ–Ω—å–∫–∞—è, —Å–∫–∞–ª–∏—Å—Ç–∞—è, —Å –æ–≥—Ä–æ–º–Ω—ã–º–∏ –ø–µ—Ä–µ–ø–∞–¥–∞–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä.",
  "Venus": "–í–µ–Ω–µ—Ä–∞. –û—á–µ–Ω—å –≥–æ—Ä—è—á–∞—è, –ø–æ–∫—Ä—ã—Ç–∞ –≥—É—Å—Ç—ã–º–∏ –æ–±–ª–∞–∫–∞–º–∏ –∏–∑ —Å–µ—Ä–Ω–æ–π –∫–∏—Å–ª–æ—Ç—ã, —Å –±–µ—à–µ–Ω—ã–º –ø–∞—Ä–Ω–∏–∫–æ–≤—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º.",
  "Earth": "–ó–µ–º–ª—è. –ù–∞—à–∞ –ø–ª–∞–Ω–µ—Ç–∞, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å –∂–∏–∑–Ω—å—é, —Å –æ–∫–µ–∞–Ω–∞–º–∏ –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–π –∂–∏–∑–Ω—å.",
  "Mars": '–ú–∞—Ä—Å. "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞–Ω–µ—Ç–∞", —Ö–æ–ª–æ–¥–Ω–∞—è, –ø—É—Å—Ç—ã–Ω–Ω–∞—è, —Å —Ç–æ–Ω–∫–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π, –æ–±—ä–µ–∫—Ç –ø–æ–∏—Å–∫–∞ –∂–∏–∑–Ω–∏.',
  "Jupiter": "–Æ–ø–∏—Ç–µ—Ä. –ì–∞–∑–æ–≤—ã–π –≥–∏–≥–∞–Ω—Ç, —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –≤ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, —Å –ë–æ–ª—å—à–∏–º –ö—Ä–∞—Å–Ω—ã–º –ü—è—Ç–Ω–æ–º ‚Äì –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–º —à—Ç–æ—Ä–º–æ–º.",
  "Saturn": "–°–∞—Ç—É—Ä–Ω. –ì–∞–∑–æ–≤—ã–π –≥–∏–≥–∞–Ω—Ç, –∏–∑–≤–µ—Å—Ç–µ–Ω —Å–≤–æ–∏–º–∏ –∫—Ä–∞—Å–∏–≤—ã–º–∏ –∫–æ–ª—å—Ü–∞–º–∏ –∏–∑ –ª—å–¥–∞ –∏ –∫–∞–º–Ω–µ–π.",
  "Uranus": '–£—Ä–∞–Ω. –õ–µ–¥—è–Ω–æ–π –≥–∏–≥–∞–Ω—Ç, –≤—Ä–∞—â–∞–µ—Ç—Å—è "–Ω–∞ –±–æ–∫—É", –∏–º–µ–µ—Ç —Å–ª–∞–±—ã–µ –∫–æ–ª—å—Ü–∞. –í–∏–ª—å—è–º –ì–µ—Ä—à–µ–ª—å, –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è, 1781 –≥–æ–¥.',
  "Neptune": '–ù–µ–ø—Ç—É–Ω. –õ–µ–¥—è–Ω–æ–π –≥–∏–≥–∞–Ω—Ç, –æ—á–µ–Ω—å —Ö–æ–ª–æ–¥–Ω—ã–π –∏ –≤–µ—Ç—Ä–µ–Ω—ã–π. –£—Ä–±–µ–Ω –õ–µ–≤–µ—Ä—å–µ –∏ –î–∂–æ–Ω –ê–¥–∞–º—Å (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ), –§—Ä–∞–Ω—Ü–∏—è –∏ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è, 1846 –≥–æ–¥ (–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∑–∞—Ç–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ).',
  "Pluto": "–ü–ª—É—Ç–æ–Ω. –ö–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞, –ª–µ–¥—è–Ω–∏—Å—Ç–æ–µ —Ç–µ–ª–æ –≤ –ø–æ—è—Å–µ –ö–æ–π–ø–µ—Ä–∞, –∫–æ–≥–¥–∞-—Ç–æ —Å—á–∏—Ç–∞–ª–∞—Å—å –¥–µ–≤—è—Ç–æ–π –ø–ª–∞–Ω–µ—Ç–æ–π. –ö–ª–∞–π–¥ –¢–æ–º–±–æ, –°–®–ê, 1930 –≥–æ–¥.",
  "Ceres": "–¶–µ—Ä–µ—Ä–∞ (Ceres). –ö–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –≤ –ø–æ—è—Å–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤, –∫—Ä—É–ø–Ω–µ–π—à–∏–π –æ–±—ä–µ–∫—Ç –≤ —ç—Ç–æ–º –ø–æ—è—Å–µ, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–µ–¥. –î–∂—É–∑–µ–ø–ø–µ –ü—å—è—Ü—Ü–∏, –ò—Ç–∞–ª–∏—è, 1801 –≥–æ–¥.",
  "Chiron": "–•–∏—Ä–æ–Ω (Chiron). –û—Ç–∫—Ä—ã—Ç –ß–∞—Ä–ª—å–∑–æ–º –ö–æ–≤–∞–ª–µ–º –≤ –ü–∞–ª–æ–º–∞—Ä—Å–∫–æ–π –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏, –°–®–ê, –≤ 1977 –≥–æ–¥—É. –≠—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º—ã–π –∫–∞–∫ –∫–µ–Ω—Ç–∞–≤—Ä ‚Äî –Ω–µ–±–æ–ª—å—à–æ–µ –Ω–µ–±–µ—Å–Ω–æ–µ —Ç–µ–ª–æ, –æ—Ä–±–∏—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–µ–∂–¥—É –æ—Ä–±–∏—Ç–∞–º–∏ –Æ–ø–∏—Ç–µ—Ä–∞ –∏ –ù–µ–ø—Ç—É–Ω–∞, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—è —Å–≤–æ–π—Å—Ç–≤–∞ –∫–∞–∫ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤, —Ç–∞–∫ –∏ –∫–æ–º–µ—Ç. –û–Ω –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–∏ –ø–ª–∞–Ω–µ—Ç–æ–π, –Ω–∏ –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç–æ–π.",
  "Eris": "–≠—Ä–∏–¥–∞ (Eris). –ö–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –≤ —Ä–∞—Å—Å–µ—è–Ω–Ω–æ–º –¥–∏—Å–∫–µ, –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –ü–ª—É—Ç–æ–Ω–∞, –æ—á–µ–Ω—å —É–¥–∞–ª–µ–Ω–∞ –æ—Ç –°–æ–ª–Ω—Ü–∞. –ú–∞–π–∫ –ë—Ä–∞—É–Ω, –ß–∞–¥ –¢—Ä—É—Ö–∏–ª—å–æ, –î—ç–≤–∏–¥ –†–∞–±–∏–Ω–æ–≤–∏—Ü, –°–®–ê, 2005 –≥–æ–¥.",
  "Moon (Luna)": "–õ—É–Ω–∞. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫ –ó–µ–º–ª–∏, —Å–∫–∞–ª–∏—Å—Ç–æ–µ —Ç–µ–ª–æ, –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–∏–ª–∏–≤—ã –∏ –æ—Ç–ª–∏–≤—ã.",
}
planetDescriptions = {name: textCompactor(desc) for name, desc in planetDescriptions.items()}





def planetProcessor(models, renderer):
  def hypot(size):
    x, y, z = size
    return x ** 2 + y ** 2 + z ** 2
  def haloSort():
    def dist(pos):
      x, y, z = pos
      # return (x - cX) ** 2 + (y - cY) ** 2 + (z - cZ) ** 2
      return (x - cX) * fwX + (y - cY) * fwY + (z - cZ) * fwZ
    cX, cY, cZ = renderer.camera
    fwX, fwY, fwZ = renderer.forward
    nonlocal haloDraws
    halos2 = sorted(halos, key = lambda halo: dist(halo._pos.translate), reverse = True)
    haloDraws = [halo.draw for halo in halos2]
  def drawer():
    for draw in planetDraws: draw()
    glDepthMask(False)
    for draw in haloDraws: draw()
    glDepthMask(True)
  def recalcPlanetPositions():
    nonlocal day, prevTargetPos

    updateIcons()

    SunX, SunY, SunZ = sunPosition
    positions = planetPositions(day)
    for name in planetNames:
      pos = positions[name]
      x, z, y = pos[:3]
      PlanetX = SunX + x * step
      PlanetY = SunY + y * step
      PlanetZ = SunZ + z * step
      radius, model = planets[name]
      radius /= dist_div
      model.update2((PlanetX, PlanetY, PlanetZ))
      for moonName in moonNames.get(name, ()):
        x, z, y = positions[moonName][:3]
        MoonX = PlanetX + x * radius
        MoonY = PlanetY + y * radius
        MoonZ = PlanetZ + z * radius
        planets[moonName][1].update2((MoonX, MoonY, MoonZ))
    day += renderer.td

    radius, model = planets[target]
    x, y, z = model.translate
    if prevTargetPos is None:
      fx, fy, fz = renderer.forward
      r = radius * 2.5
      renderer.setCamPos(x - fx * r, y - fy * r, z - fz * r)
    elif type(prevTargetPos) is not int:
      px, py, pz = prevTargetPos
      dx, dy, dz = x - px, y - py, z - pz
      if dx or dy or dz:
        renderer.moveCam(dx, dy, dz)
    prevTargetPos = x, y, z

    # step = (sunS / sunRadius) / max(1, 10 - day / 2)

  def changeTarget(inc):
    nonlocal target, targetN, prevTargetPos
    if type(inc) is str:
      try: targetN = targetNames.index(inc)
      except ValueError: return
      target = inc
      radius, model = planets[target]
      prevTargetPos = model.translate
    else:
      targetN = (targetN + (1 if inc else -1)) % len(targetNames)
      target = targetNames[targetN]
      prevTargetPos = None
    renderer.setTargetText(target)
  def findNearestPlanet():
    if type(prevTargetPos) is not tuple:
      return
    camera_dist = renderer.camera_dist
    mi = 1e400
    result = None
    for name in targetNames:
      radius, model = planets[name]
      D = camera_dist(model.translate) - radius
      if D < mi:
        mi = D
        result = D, name, radius, model
    center_D = camera_dist((0, 0, 0))
    if center_D < mi: result = (center_D,) + result[1:]
    return result

  # –ò–Ω–¥–µ–∫—Å –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ –¥–≤–∏–≥–∞—Ç–µ–ª–µ –ø–ª–∞–Ω–µ—Ç (–æ—Ç –±–æ–ª—å—à–µ–π –∫ –º–µ–Ω—å—à–µ–π):
  # –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ —Ä–µ–µ—Å—Ç—Ä–µ SolarSystem.rbxm - –æ–ø–∏—Å–∞–Ω–∏–µ

  # Ganymede - —Å–ø—É—Ç–Ω–∏–∫ –Æ–ø–∏—Ç–µ—Ä–∞
  # Titan - —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Callisto - —Å–ø—É—Ç–Ω–∏–∫ –Æ–ø–∏—Ç–µ—Ä–∞
  # Io - —Å–ø—É—Ç–Ω–∏–∫ –Æ–ø–∏—Ç–µ—Ä–∞
#‚úÖ Moon (Luna) - –Ω—É –ø–æ–Ω—è—Ç–Ω–æ
  # Europa - —Å–ø—É—Ç–Ω–∏–∫ –Æ–ø–∏—Ç–µ—Ä–∞
  # Triton - —Å–ø—É—Ç–Ω–∏–∫ –ù–µ–ø—Ç—É–Ω–∞
  # Haumea ‚Äî –∫–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∞—è—Å—è –∫–∞–∫ –ø–ª—É—Ç–æ–∏–¥, —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç (–¢–ù–û)
  # Titania - —Å–ø—É—Ç–Ω–∏–∫ –£—Ä–∞–Ω–∞
  # Rhea - —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Oberon - —Å–ø—É—Ç–Ω–∏–∫ –£—Ä–∞–Ω–∞
  # Iapetus - —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Makemake - –∫–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–º –æ–±—ä–µ–∫—Ç–∞–º (–¢–ù–û), –ø–ª—É—Ç–æ–∏–¥–∞–º. –Ø–≤–ª—è–µ—Ç—Å—è –∫—Ä—É–ø–Ω–µ–π—à–∏–º –∏–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ—è—Å–∞ –ö–æ–π–ø–µ—Ä–∞
  # 2007 OR‚ÇÅ‚ÇÄ - –æ–¥–Ω–∞ –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –∫–∞—Ä–ª–∏–∫–æ–≤—ã—Ö –ø–ª–∞–Ω–µ—Ç –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
  # Charon - —Å–ø—É—Ç–Ω–∏–∫ –ü–ª—É—Ç–æ–Ω–∞
  # Umbriel - —Å–ø—É—Ç–Ω–∏–∫ –£—Ä–∞–Ω–∞
  # Ariel - —Å–ø—É—Ç–Ω–∏–∫ –£—Ä–∞–Ω–∞
  # Dione - —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Quaoar - —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –æ–¥–∏–Ω –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–æ—è—Å–µ –ö–æ–π–ø–µ—Ä–∞, —á–∞—Å—Ç–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –∫–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞
  # Tethys - (–¢–µÃÅ—Ñ–∏—è) —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Sedna - —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç. –ë—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ 14 –Ω–æ—è–±—Ä—è 2003 –≥–æ–¥–∞ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–º–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è–º–∏ –ë—Ä–∞—É–Ω–æ–º, –¢—Ä—É—Ö–∏–ª—å–æ –∏ –†–∞–±–∏–Ω–æ–≤–∏—Ü–µ–º
  # Orcus - –û—Ä–∫ (90482 Orcus) ‚Äî –∫—Ä—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –∏–∑ –ø–æ—è—Å–∞ –ö–æ–π–ø–µ—Ä–∞, –≤–µ—Ä–æ—è—Ç–Ω–æ, —è–≤–ª—è—é—â–∏–π—Å—è –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç–æ–π
  # Salacia - –°–∞–ª–∞—Ü–∏—è (120347 Salacia –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É –¶–µ–Ω—Ç—Ä–∞ –º–∞–ª—ã—Ö –ø–ª–∞–Ω–µ—Ç) ‚Äî —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –≤ –ø–æ—è—Å–µ –ö–æ–π–ø–µ—Ä–∞. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∏ –∫–∞–∫ –∫—å—é–±–∏–≤–∞–Ω–æ (MPC), –∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç (DES). –û–Ω –±—ã–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω 22 —Å–µ–Ω—Ç—è–±—Ä—è 2004 –≥–æ–¥–∞ –≥—Ä—É–ø–ø–æ–π —É—á—ë–Ω—ã—Ö –∏–∑ –ü–∞–ª–æ–º–∞—Ä—Å–∫–æ–π –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏. –û–±–ª–∞–¥–∞–µ—Ç –æ–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö –Ω–∏–∑–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∞–ª—å–±–µ–¥–æ —Å—Ä–µ–¥–∏ –∫—Ä—É–ø–Ω—ã—Ö –¢–ù–û. –ú–∞–π–∫–ª –ë—Ä–∞—É–Ω —Å—á–∏—Ç–∞–µ—Ç –µ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º –Ω–∞ —Å—Ç–∞—Ç—É—Å –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã
  # 2002 MS4 - –∫—Ä—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –ø–æ—è—Å–µ –ö–æ–π–ø–µ—Ä–∞. –û–Ω –±—ã–ª –æ—Ç–∫—Ä—ã—Ç 18 –∏—é–Ω—è 2002 –≥–æ–¥–∞ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–º–∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∞–º–∏ –ß–µ–¥–≤–∏–∫–æ–º –¢—Ä—É—Ö–∏–ª—å–æ –∏ –ú–∞–π–∫–ª–æ–º –ë—Ä–∞—É–Ω–æ–º
  # Varda - –í–∞—Ä–¥–∞ (174567) ‚Äî —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –∫–∞–Ω–¥–∏–¥–∞—Ç –≤ –∫–∞—Ä–ª–∏–∫–æ–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã. –û—Ç–∫—Ä—ã—Ç 21 –∏—é–Ω—è 2003 –≥–æ–¥–∞ –î–∂–µ—Ñ—Ñ—Ä–∏ –õ–∞—Ä—Å–µ–Ω–æ–º –ø–æ –ø—Ä–æ–µ–∫—Ç—É Spacewatch
  # Ixion - –ò–∫—Å–∏–æ–Ω (28978) ‚Äî –æ–±—ä–µ–∫—Ç –ø–æ—è—Å–∞ –ö–æ–π–ø–µ—Ä–∞. –Ø–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –ø–ª—É—Ç–∏–Ω–æ (—Ç–æ –µ—Å—Ç—å —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–º –æ–±—ä–µ–∫—Ç–æ–º, –æ—Ä–±–∏—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å—Ö–æ–¥–Ω–∞ —Å –æ—Ä–±–∏—Ç–æ–π –ü–ª—É—Ç–æ–Ω–∞)
  # Dysnomia - —Å–ø—É—Ç–Ω–∏–∫ –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã (136199) –≠—Ä–∏–¥–∞, –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –Ω–∞–∑–≤–∞–Ω–Ω—ã–π S/2005 (2003 UB313)
  # 2014 UZ‚ÇÇ‚ÇÇ‚ÇÑ ‚Äî –∫—Ä—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –ø–æ—è—Å–µ –ö–æ–π–ø–µ—Ä–∞, –∫–∞–Ω–¥–∏–¥–∞—Ç –≤ –∫–∞—Ä–ª–∏–∫–æ–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã. –û—Ç–∫—Ä—ã—Ç –≥—Ä—É–ø–ø–æ–π –∞—Å—Ç—Ä–æ–Ω–æ–º–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ Pan-STARRS 19 –∞–≤–≥—É—Å—Ç–∞ 2014 –≥–æ–¥–∞ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–∞–º–µ—Ä—ã DECam —Ç–µ–ª–µ—Å–∫–æ–ø–∞ –∏–º–µ–Ω–∏ –í–∏–∫—Ç–æ—Ä–∞ –ë–ª–∞–Ω–∫–æ –≤ –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏ –°–µ—Ä—Ä–æ-–¢–æ–ª–æ–ª–æ –≤ –ß–∏–ª–∏
  # Varuna - (20000) –í–∞ÃÅ—Ä—É–Ω–∞ ‚Äî —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –æ–¥–∏–Ω –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –∫—å—é–±–∏–≤–∞–Ω–æ (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ—è—Å–∞ –ö–æ–π–ø–µ—Ä–∞), –æ—Ç–¥–µ–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
  # Vesta - –í–µ—Å—Ç–∞ (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ ‚Äî 4 –í–µ—Å—Ç–∞; –∞–Ω–≥–ª. 4 Vesta) ‚Äî –∞—Å—Ç–µ—Ä–æ–∏–¥, –¥–≤–∏–∂—É—â–∏–π—Å—è –≤–±–ª–∏–∑–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã –ì–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è—Å–∞ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤. –í—Ö–æ–¥–∏—Ç –≤ —Å–µ–º–µ–π—Å—Ç–≤–æ –í–µ—Å—Ç—ã (–≤–µ—Å—Ç–æ–∏–¥—ã)
  # Pallas - –ü–∞–ª–ª–∞–¥–∞ (Pallas) ‚Äî –∫—Ä—É–ø–Ω–µ–π—à–∏–π –∞—Å—Ç–µ—Ä–æ–∏–¥ –ì–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è—Å–∞ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤. –û—Ç–∫—Ä—ã—Ç 28 –º–∞—Ä—Ç–∞ 1802 –≥–æ–¥–∞ –ì–µ–Ω—Ä–∏—Ö–æ–º –í–∏–ª—å–≥–µ–ª—å–º–æ–º –û–ª—å–±–µ—Ä—Å–æ–º –∏ –Ω–∞–∑–≤–∞–Ω –≤ —á–µ—Å—Ç—å –¥—Ä–µ–≤–Ω–µ–≥—Ä–µ—á–µ—Å–∫–æ–π –±–æ–≥–∏–Ω–∏ –ê—Ñ–∏–Ω—ã –ü–∞–ª–ª–∞–¥—ã
  # Enceladus - —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Chaos - –•–∞–æ—Å (19521) ‚Äî –∫—Ä—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –ø–æ—è—Å–µ –ö–æ–π–ø–µ—Ä–∞. –ë—ã–ª –æ—Ç–∫—Ä—ã—Ç –≤ 1998 –≥–æ–¥—É –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ì–ª—É–±–æ–∫–∏–π –æ–±–∑–æ—Ä —ç–∫–ª–∏–ø—Ç–∏–∫–∏¬ª, –≤ –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏ –ö–∏—Ç—Ç –ü–∏–∫ –Ω–∞ 4-–º–µ—Ç—Ä–æ–≤–æ–º —Ç–µ–ª–µ—Å–∫–æ–ø–µ
  # Miranda - —Å–ø—É—Ç–Ω–∏–∫ –£—Ä–∞–Ω–∞
  # Vanth - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (90482) –û—Ä–∫. –ï–≥–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –ú–∞–π–∫–ª –ë—Ä–∞—É–Ω –∏ –¢. –ê. –°—É–µ—Ä, –∏–∑—É—á–∞—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–µ—Å–∫–æ–ø–∞ ¬´–•–∞–±–±–ª¬ª 13 –Ω–æ—è–±—Ä—è 2005 –≥–æ–¥–∞
  # Hygiea - –∫–∞—Ä–ª–∏–∫–æ–≤–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –≤ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, —á–µ—Ç–≤—ë—Ä—Ç–æ–µ –ø–æ –≤–µ–ª–∏—á–∏–Ω–µ –Ω–µ–±–µ—Å–Ω–æ–µ —Ç–µ–ª–æ –≤ –≥–ª–∞–≤–Ω–æ–º –ø–æ—è—Å–µ –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤ –º–µ–∂–¥—É –ú–∞—Ä—Å–æ–º –∏ –Æ–ø–∏—Ç–µ—Ä–æ–º
  # Proteus - —Å–ø—É—Ç–Ω–∏–∫ –ù–µ–ø—Ç—É–Ω–∞
  # Huya - Huya (38628) ‚Äî –∫—Ä—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –æ—Ç–Ω–æ—Å—è—â–∏–π—Å—è –∫ –≥—Ä—É–ø–ø–µ –ø–ª—É—Ç–∏–Ω–æ –∏ —è–≤–ª—è—é—â–∏–π—Å—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º –≤ –∫–∞—Ä–ª–∏–∫–æ–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã. –û–Ω –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ä–µ–∑–æ–Ω–∞–Ω—Å–µ 2:3 —Å –ù–µ–ø—Ç—É–Ω–æ–º
  # Mimas - —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # Ilmar√´ ‚Äî —Å–ø—É—Ç–Ω–∏–∫ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (–∫—å—é–±–∏–≤–∞–Ω–æ) (174567) –í–∞—Ä–¥–∞. –ë—ã–ª –æ—Ç–∫—Ä—ã—Ç 26 –∞–ø—Ä–µ–ª—è 2009 –≥–æ–¥–∞ –∫–æ–º–∞–Ω–¥–æ–π –∞—Å—Ç—Ä–æ–Ω–æ–º–æ–≤ –ø–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ö–∏—Ç–∞ –°. –ù–æ–ª–ª–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö, –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö —Å –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–µ—Å–∫–æ–ø–∞ ¬´–•–∞–±–±–ª¬ª
  # Nereid - (–ù–µ—Ä–µ–∏–¥–∞) —Å–ø—É—Ç–Ω–∏–∫ –ù–µ–ø—Ç—É–Ω–∞
  # Actaea - –ê–∫—Ç–µ—è (120347 Salacia I Actaea) ‚Äî —Å–ø—É—Ç–Ω–∏–∫ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (120347) –°–∞–ª–∞—Ü–∏—è. –ë—ã–ª –æ—Ç–∫—Ä—ã—Ç 21 –∏—é–ª—è 2006 –≥–æ–¥–∞ –Ω–∞ —Å–Ω–∏–º–∫–∞—Ö —Ç–µ–ª–µ—Å–∫–æ–ø–∞ ¬´–•–∞–±–±–ª¬ª. 13 18 —Ñ–µ–≤—Ä–∞–ª—è 2011 –≥–æ–¥–∞ —Å–ø—É—Ç–Ω–∏–∫—É –ø—Ä–∏—Å–≤–æ–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –ê–∫—Ç–µ—è ‚Äî –ø–æ –∏–º–µ–Ω–∏ –º–æ—Ä—Å–∫–æ–π –Ω–∏–º—Ñ—ã
  # Chariklo - 10199 –•–∞—Ä–∏–∫–ª–æ ‚Äî –æ–¥–∏–Ω –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –∫–µ–Ω—Ç–∞–≤—Ä–æ–≤, —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –∞—Å—Ç–µ—Ä–æ–∏–¥ –º–µ–∂–¥—É –ì–ª–∞–≤–Ω—ã–º –ø–æ—è—Å–æ–º –∏ –ø–æ—è—Å–æ–º –ö–æ–π–ø–µ—Ä–∞. –•–∞—Ä–∏–∫–ª–æ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ 15 —Ñ–µ–≤—Ä–∞–ª—è 1997 –≥–æ–¥–∞ –î–∂–µ–π–º—Å–æ–º –°–∫–æ—Ç—Ç–∏ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ Spacewatch. –ù–∞–∑–≤–∞–Ω–∞ –≤ —á–µ—Å—Ç—å –•–∞—Ä–∏–∫–ª–æ ‚Äî –∂–µ–Ω—ã –∫–µ–Ω—Ç–∞–≤—Ä–∞ –•–∏—Ä–æ–Ω–∞
  # Hi'iaka - –∫—Ä—É–ø–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π —Å–ø—É—Ç–Ω–∏–∫ –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã –•–∞—É–º–µ–∞. 13 –û–Ω –±—ã–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω 26 —è–Ω–≤–∞—Ä—è 2005 –≥–æ–¥–∞
  # Hyperion - –≤–æ—Å—å–º–æ–π —Å–ø—É—Ç–Ω–∏–∫ –°–∞—Ç—É—Ä–Ω–∞
  # S/2012 (38628) 1 - –º–∞–ª–µ–Ω—å–∫–∏–π –Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–æ–∫—Ä—É–≥ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –≤ –∫–∞—Ä–ª–∏–∫–æ–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã 38628 –•—É—è. –û–Ω –±—ã–ª –æ—Ç–∫—Ä—ã—Ç 6 –º–∞—è 2012 –≥–æ–¥–∞ –∫–æ–º–∞–Ω–¥–æ–π –ø–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ö–∏—Ç–∞ –ù–æ–ª–ª–∞
  # Larissa - –õ–∞—Ä–∏—Å—Å–∞ ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–ø—É—Ç–Ω–∏–∫ –ø–ª–∞–Ω–µ—Ç—ã –ù–µ–ø—Ç—É–Ω. –¢–∞–∫–∂–µ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–∞–∫ –ù–µ–ø—Ç—É–Ω VII. –õ–∞—Ä–∏—Å—Å–∞ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –ì–∞—Ä–æ–ª—å–¥–æ–º –†–µ–π—Ç—Å–µ–º–æ–π, –£–∏–ª—å—è–º–æ–º –•–∞–±–±–∞—Ä–¥–æ–º, –õ–∞—Ä—Ä–∏ –õ–µ–±–æ—Ñ—Å–∫–∏, –î—ç–≤–∏–¥–æ–º –¢–æ–ª–µ–Ω–æ–º 24 –º–∞—è 1981 –≥–æ–¥–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–ª—É—á–∞–π–Ω–æ–º—É –Ω–∞–±–ª—é–¥–µ–Ω–∏—é —Å –ó–µ–º–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è —ç—Ç–∏–º —Å–ø—É—Ç–Ω–∏–∫–æ–º –∑–≤–µ–∑–¥—ã. –ü–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∞ –≤ 1989 –≥–æ–¥—É –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –∞–ø–ø–∞—Ä–∞—Ç–∞ ¬´–í–æ—è–¥–∂–µ—Ä-2¬ª –≤–æ–∑–ª–µ –ù–µ–ø—Ç—É–Ω–∞. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±—ã–ª–æ –¥–∞–Ω–æ 16 —Å–µ–Ω—Ç—è–±—Ä—è 1991 –≥–æ–¥–∞
  # MK2 - —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫ –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã Makemake
  # Namaka - –ù–∞–º–∞–∫–∞ ‚Äî –º–µ–Ω—å—à–∏–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–ø—É—Ç–Ω–∏–∫ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤–æ–π –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã –•–∞—É–º–µ–∞. –û–Ω –±—ã–ª –æ—Ç–∫—Ä—ã—Ç 30 –∏—é–Ω—è 2005 –≥–æ–¥–∞ –∏ –Ω–∞–∑–≤–∞–Ω –≤ —á–µ—Å—Ç—å –ù–∞–º–∞–∫–∏, –±–æ–≥–∏–Ω–∏ –º–æ—Ä—è –≤ –≥–∞–≤–∞–π—Å–∫–æ–π –º–∏—Ñ–æ–ª–æ–≥–∏–∏ –∏ –æ–¥–Ω–æ–π –∏–∑ –¥–æ—á–µ—Ä–µ–π –•–∞—É–º–µ–∞
  # Weywot - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫ —Ç—Ä–∞–Ω—Å–Ω–µ–ø—Ç—É–Ω–æ–≤–æ–π –∫–∞—Ä–ª–∏–∫–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã –ö–≤–∞–æ–∞—Ä. –ë—ã–ª –æ—Ç–∫—Ä—ã—Ç –ú–∞–π–∫–ª–æ–º –ë—Ä–∞—É–Ω–æ–º –∏ –¢–µ—Ä—Ä–∏-–≠–Ω–Ω –°—É–µ—Ä —Å –ø–æ–º–æ—â—å—é —Å–Ω–∏–º–∫–æ–≤, —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º —Ç–µ–ª–µ—Å–∫–æ–ø–æ–º ¬´–•–∞–±–±–ª¬ª 14 —Ñ–µ–≤—Ä–∞–ª—è 2006 –≥–æ–¥–∞
  # Hale-Bopp - —ç—Ç–æ –∫–æ–º–µ—Ç–∞. –û–Ω–∞ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ 23 –∏—é–ª—è 1995 –≥–æ–¥–∞ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–º–∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∞–º–∏ –ê–ª–∞–Ω–æ–º –•–µ–π–ª–æ–º –∏ –¢–æ–º–∞—Å–æ–º –ë–æ–ø–ø–æ–º
  # Phobos - —Å–ø—É—Ç–Ω–∏–∫ –ú–∞—Ä—Å–∞
  # Deimos - —Å–ø—É—Ç–Ω–∏–∫ –ú–∞—Ä—Å–∞
  # Halley's comet - –ö–æ–º–µ—Ç–∞ –ì–∞–ª–ª–µ—è (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ 1P/Halley) ‚Äî —è—Ä–∫–∞—è –∫–æ—Ä–æ—Ç–∫–æ–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∫–æ–º–µ—Ç–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è—Å—è –∫ –°–æ–ª–Ω—Ü—É –∫–∞–∂–¥—ã–µ 75‚Äì76 –ª–µ—Ç. –ù–∞–∑–≤–∞–Ω–∞ –≤ —á–µ—Å—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∞—Å—Ç—Ä–æ–Ω–æ–º–∞ –≠–¥–º—É–Ω–¥–∞ –ì–∞–ª–ª–µ—è. –° –∫–æ–º–µ—Ç–æ–π —Å–≤—è–∑–∞–Ω—ã –º–µ—Ç–µ–æ—Ä–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —ç—Ç–∞-–ê–∫–≤–∞—Ä–∏–¥—ã –∏ –û—Ä–∏–æ–Ω–∏–¥—ã

  def clickHandler(models, data):
    renderer.setClickHandler(models, lambda: clickByPlanet(data))
  def clickByPlanet(data):
    name, radius, translated = data
    if name != target:
      changeTarget(name)
      return
    glyphs = renderer.glyphs
    if name in selectedPlanets:
      _, _, n, n2 = selectedPlanets.pop(name)
      renderer.textureChain.remove_texture(n)
      renderer.glyphs.delete(n2)
    else:
      icon = generateIcon(name)
      n = renderer.textureChain.add_texture(icon, 0, 0, 0, 0.5, 0.5)
      glyphs.setHeight(renderer.W / 8)
      glyphs.setColor(0xadffad)
      n2 = glyphs.add(0, 0, 0, planetDescriptions.get(name, "?"), True, False)
      selectedPlanets[name] = planets[name] + (n, n2)

  def updateIcons():
    set_pos_WH = renderer.textureChain.set_pos_WH
    camera_dist = renderer.camera_dist
    setPosition = renderer.glyphs.setPosition
    W = renderer.W
    ratio = renderer.WH_ratio
    for name, (radius, model, n, n2) in selectedPlanets.items():
      x, y, z = pos = model.translate
      dist = camera_dist(pos)
      dist = max(dist / radius, 2)
      size = 1 / dist
      pos = (x, y, z, 1)._a_float
      pos2d = FLOAT.new_array(4)
      multiplyMV(pos2d, 0, renderer.MVPmatrix, 0, pos, 0)
      x, y, _, w = pos2d
      x /= w
      y /= w
      visible = w > 0 and size > 0.05
      size2 = max(size, 0.05)
      set_pos_WH(n, x, y, size, size, visible)
      # set_pos_WH(n, x, y, size2, size2, w > 0)
      setPosition(n2, x + size, y + size * ratio, size * W / 8, visible)

  def SunDraw(origDraw):
    def draw():
      glUniform1i(uLightSource, 1)
      origDraw()
      glUniform1i(uLightSource, 0)
    uLightSource = renderer.noPBR.uLightSource
    return draw
  def generateIcon(name):
    try: return iconCache[name]
    except KeyError: pass
    motor = icon_motor_sun if name == "Sun" else icon_motor
    model = iconModels[name]
    iconCache[name] = icon = iconGenerator(model, renderer, motor)
    return icon

  unionM, PBR_unionM, charModelM = models
  #     unionM.type = UnionModel
  # PBR_unionM.type = UnionModel
  #     unionM.models[i].type = MatrixModel
  # PBR_unionM.models[i].type = MatrixModel
  # charModelM.type = None | CharacterModel
  models = sorted(unionM.models, key = lambda model: hypot(model.info["size"]))
  groups = {}
  order = []
  for model in models:
    key = model.info["node"]["_parent"]
    if key in groups: groups[key].append(model)
    else:
      groups[key] = [model]
      order.append(key)
  planets = {}
  planetDraws = []
  halos = []
  haloDraws = []
  result = []
  X = 0
  planetNames = {"Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune", "Pluto", "Ceres", "Eris"}
  moonNames = {"Earth": ("Moon (Luna)",)}
  targetNames = ("Sun", "Mercury", "Venus", "Earth", "Moon (Luna)", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune", "Pluto", "Ceres", "Eris")
  targetNameSet = set(targetNames) # —Ç–æ–ª—å–∫–æ –¥–ª—è print
  iconModels = {}
  iconCache = {}

  for node in order:
    group = groups[node]
    name = node["_name"]
    # print("üêæüêæüêï", len(group), name, ("üî•", "‚úÖ")[name in targetNameSet])

    radius = group[-1].info["size"][0] # —Å —É—á—ë—Ç–æ–º –ø–æ—è—Å–∞ –∏ —Ç–æ–ª—å–∫–æ X
    if name not in planetNames:
      if X: X += radius
      pos = (X, -10, 0)
      X += radius
    else: pos = (0, 0, 0)

    union = UnionModel(group)

    scale = 1 / radius
    icon_model = ScaleModel(union.clone(), (scale, scale, scale))
    iconModels[name] = icon_model

    n = len(group) - 1
    while "decal" in group[n].info: n -= 1
    radius = sum(group[n].info["size"]) / 3 # –±–µ–∑ —É—á—ë—Ç–∞ –ø–æ—è—Å–∞ –∏ —Å–æ –≤—Å–µ–º–∏ –æ—Å—è–º–∏

    translated = TranslateModel(union, pos)
    result.append(translated)
    planets[name] = radius, translated

    for model in group:
      if "decal" in model.info:
        halos.append(model)
        model._pos = translated
      else:
        draw = model.draw
        if name == "Sun": draw = SunDraw(draw)
        planetDraws.append(draw)

    clickHandler(group[:n+1], (name, radius, translated))

  sunS = planets["Sun"][0]
  step = sunS / sunRadius
  print("step:", step) # –£—Å–ª–æ–≤–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü –¥–ª–∏–Ω—ã –Ω–∞ –æ–¥–Ω—É AU
  dist_div = 10
  step /= dist_div # –¢.–∫. –∏—Ö –°–õ–ò–®–ö–û–ú –º–Ω–æ–≥–æ
  sunPosition = planets["Sun"][1].translate
  renderer.lightPos = sunPosition
  day = 0  

  target = "???"
  targetN = -1
  changeTarget(1)
  prevTargetPos = 0
  selectedPlanets = {}

  renderer.camMoveEvent = haloSort
  renderer.recalcPlanetPositions = recalcPlanetPositions
  renderer.changeTarget = changeTarget
  renderer.findNearestPlanet = findNearestPlanet

  unionM = UnionModel(result)
  unionM.draw = drawer
  return unionM, PBR_unionM, charModelM
